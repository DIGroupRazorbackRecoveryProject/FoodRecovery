<!-- templates/profileSettings.html -->
<h1 class="title">Settings</h1>
<link rel="stylesheet" href="./styles/accountstyle.css">
<div class="accordion" id="settingsAccordion">

  <!-- Display Settings Section -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingDisplaySettings">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDisplaySettings" aria-expanded="true" aria-controls="collapseDisplaySettings">
        Display Settings
      </button>
    </h2>
    <div id="collapseDisplaySettings" class="accordion-collapse" aria-labelledby="headingDisplaySettings" data-bs-parent="#settingsAccordion">
      <div class="accordion-body">
        <label><input type="checkbox" id="notification-toggle"> Enable Dark Mode</label><br>
        <label><input type="checkbox" id="compactLayoutToggle"> Compact Layout</label>
      </div>
    </div>
  </div>

  <!-- Notifications Section -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingNotifications">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNotifications" aria-expanded="false" aria-controls="collapseNotifications">
        Notifications
      </button>
    </h2>
    <div id="collapseNotifications" class="accordion-collapse collapse show" aria-labelledby="headingNotifications" data-bs-parent="#settingsAccordion">
      <div class="accordion-body">
        <label><input type="checkbox" id="newDonationAlert"> New Donation Alerts</label><br>
        <label><input type="checkbox" id="volunteerOpportunityAlert"> Volunteer Opportunities</label>
      </div>
    </div>
  </div>

  <!-- Language Section -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingLanguage">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLanguage" aria-expanded="false" aria-controls="collapseLanguage">
        Language
      </button>
    </h2>
    <div id="collapseLanguage" class="accordion-collapse collapse show" aria-labelledby="headingLanguage" data-bs-parent="#settingsAccordion">
      <div class="accordion-body">
        <select id="languageSelect">
          <option value="en">English</option>
          <option value="es">Spanish</option>        
        </select>
      </div>
    </div>
  </div>

  <!-- Help Section -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingHelpCenter">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHelpCenter" aria-expanded="false" aria-controls="collapseHelpCenter">
        Help
      </button>
    </h2>
    <div id="collapseHelpCenter" class="accordion-collapse collapse show" aria-labelledby="headingHelpCenter" data-bs-parent="#settingsAccordion">
      <div class="accordion-body">
        <a href="#">FAQ</a><br>
        <a href="#">Contact Us</a>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('darkModeToggle').addEventListener('change', function() {
    document.body.classList.toggle('dark-mode', this.checked);
  });

  document.getElementById('compactLayoutToggle').addEventListener('change', function() {
    document.body.classList.toggle('compact-layout', this.checked);
  });

  document.getElementById('languageSelect').addEventListener('change', function() {
    alert("Language changed to " + this.options[this.selectedIndex].text);
  });

  $(document).ready(function() {
    const loggedIn = localStorage.getItem('loggedIn');
    if (loggedIn === 'true') {
      // Fetch account details if logged in
    } else {
      // Show login modal if not logged in
      $(`
        <div class="modal fade" id="loginRequiredModal" tabindex="-1" aria-labelledby="loginRequiredModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="loginRequiredModalLabel">Login Required</h5>
              </div>
              <div class="modal-body">
                Please log in to access settings for your volunteer account.
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="loadContent('volunteerlogin')">Login</button>
              </div>
            </div>
          </div>
        </div>
      `).appendTo('body');
      $('#loginRequiredModal').modal('show');
    }
  });

  $('#my-account-link').click(function(event) {
    event.preventDefault();
    loadContent('profilesettings');
  });

  $('#logout-accountbutton').click(function(event) {
    event.preventDefault();
    loadContent('home');
  });
</script>
